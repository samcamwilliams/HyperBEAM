<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module hb_singleton</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module hb_singleton</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>A parser that translates Converge HTTP API requests in TABM format
   into an ordered list of messages to evaluate.


<h2><a name="description">Description</a></h2>A parser that translates Converge HTTP API requests in TABM format
   into an ordered list of messages to evaluate. The details of this format
   are described in <code>docs/converge-http-api.md`.
  
   Syntax overview:
   ```
       Singleton: Message containing keys and a `path` field,
                  which may also contain a query string of key-value pairs.
  
       Path:
           - /Part1/Part2/.../PartN/ =&gt; [Part1, Part2, ..., PartN]
           - /ID/Part2/.../PartN =&gt; [ID, Part2, ..., PartN]
  
       Part: (Key + Resolution), Device?, #{ K =&gt; V}?
           - Part =&gt; #{ path =&gt; Part }
           - Part&amp;Key=Value =&gt; #{ path =&gt; Part, Key =&gt; Value }
           - Part&amp;Key =&gt; #{ path =&gt; Part, Key =&gt; true }
           - Part&amp;k1=v1&amp;k2=v2 =&gt; #{ path =&gt; Part, k1 =&gt; &lt;&lt;"v1"&gt;&gt;, k2 =&gt; &lt;&lt;"v2"&gt;&gt; }
           - Part~Device =&gt; {as, Device, #{ path =&gt; Part }}
           - Part~D&amp;K1=V1 =&gt; {as, D, #{ path =&gt; Part, K1 =&gt; &lt;&lt;"v1"&gt;&gt; }}
           - pt&amp;k1+int=1 =&gt; #{ path =&gt; pt, k1 =&gt; 1 }
           - pt~d&amp;k1+int=1 =&gt; {as, d, #{ path =&gt; pt, k1 =&gt; 1 }}
           - (/nested/path) =&gt; Resolution of the path /nested/path
           - (/nested/path&amp;k1=v1) =&gt; (resolve /nested/path)#{k1 =&gt; v1}
           - (/nested/path~D&amp;K1=V1) =&gt; (resolve /nested/path)#{K1 =&gt; V1}
           - pt&amp;k1+res=(/a/b/c) =&gt; #{ path =&gt; pt, k1 =&gt; (resolve /a/b/c) }
       Key:
           - key: &lt;&lt;"value"&gt;&gt; =&gt; #{ key =&gt; &lt;&lt;"value"&gt;&gt;, ... } for all messages
           - n.key: &lt;&lt;"value"&gt;&gt; =&gt; #{ key =&gt; &lt;&lt;"value"&gt;&gt;, ... } for Nth message
           - key+Int: 1 =&gt; #{ key =&gt; 1, ... }
           - key+Res: /nested/path =&gt; #{ key =&gt; (resolve /nested/path), ... }
           - N.Key+Res=(/a/b/c) =&gt; #{ Key =&gt; (resolve /a/b/c), ... }</code>''
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-converge_message">converge_message()</a></h3>
<p><code>converge_message() = map() | binary()</code></p>


<h3 class="typedecl"><a name="type-tabm_message">tabm_message()</a></h3>
<p><code>tabm_message() = map()</code></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#from-1">from/1</a></td><td>Normalize a singleton TABM message into a list of executable Converge
  messages.</td></tr>
<tr><td valign="top"><a href="#to-1">to/1</a></td><td>Convert a list of converge message into TABM message.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="from-1">from/1</a></h3>
<div class="spec">
<p><code>from(RawMsg) -&gt; any()</code></p>
<p> </p>
</div><p>Normalize a singleton TABM message into a list of executable Converge
  messages.</p>

<h3 class="function"><a name="to-1">to/1</a></h3>
<div class="spec">
<p><code>to(Messages::[<a href="#type-converge_message" docgen-rel="seetype" docgen-href="#converge_message/0">converge_message()</a>]) -&gt; <a href="#type-tabm_message" docgen-rel="seetype" docgen-href="#tabm_message/0">tabm_message()</a></code><br></p>
<p> </p>
</div><p>Convert a list of converge message into TABM message.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>

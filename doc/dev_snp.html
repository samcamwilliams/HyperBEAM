<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module dev_snp</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module dev_snp</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>This device offers an interface for validating AMD SEV-SNP attestations,
   as well as generating them, if called in an appropriate environment.


<h2><a name="description">Description</a></h2>This device offers an interface for validating AMD SEV-SNP attestations,
   as well as generating them, if called in an appropriate environment.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#generate-3">generate/3</a></td><td>Generate an attestation report and emit it as a message, including all of
  the necessary data to generate the nonce (ephemeral node address + node
  message ID), as well as the expected measurement (firmware, kernel, and VMSAs
  hashes).</td></tr>
<tr><td valign="top"><a href="#init-3">init/3</a></td><td>Should take in options to set for the device such as kernel, initrd, firmware,
  and append hashes and make them available to the device.</td></tr>
<tr><td valign="top"><a href="#trusted-3">trusted/3</a></td><td>Default implementation of a resolver for trusted software.</td></tr>
<tr><td valign="top"><a href="#verify-3">verify/3</a></td><td>Verify an attestation report message; validating the identity of a
  remote node, its ephemeral private address, and the integrity of the report.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="generate-3">generate/3</a></h3>
<div class="spec">
<p><code>generate(M1, M2, Opts) -&gt; any()</code></p>
<p> </p>
</div><p>Generate an attestation report and emit it as a message, including all of
  the necessary data to generate the nonce (ephemeral node address + node
  message ID), as well as the expected measurement (firmware, kernel, and VMSAs
  hashes).</p>

<h3 class="function"><a name="init-3">init/3</a></h3>
<div class="spec">
<p><code>init(M1, M2, Opts) -&gt; any()</code></p>
<p> </p>
</div><p>Should take in options to set for the device such as kernel, initrd, firmware,
  and append hashes and make them available to the device. Only runnable once,
  and only if the operator is not set to an address (and thus, the node has not
  had any priviledged access).</p>

<h3 class="function"><a name="trusted-3">trusted/3</a></h3>
<div class="spec">
<p><code>trusted(Msg1, Msg2, NodeOpts) -&gt; any()</code></p>
<p> </p>
</div><p>Default implementation of a resolver for trusted software. Searches the
  <code>trusted</code> key in the base message for a list of trusted values, and checks
  if the value in the request message is a member of that list.</p>

<h3 class="function"><a name="verify-3">verify/3</a></h3>
<div class="spec">
<p><code>verify(M1, M2, NodeOpts) -&gt; any()</code></p>
<p> </p>
</div><p>Verify an attestation report message; validating the identity of a
  remote node, its ephemeral private address, and the integrity of the report.
  The checks that must be performed to validate the report are:
  1. Verify the address and the node message ID are the same as the ones
     used to generate the nonce.
  2. Verify the address that signed the message is the same as the one used
     to generate the nonce.
  3. Verify that the debug flag is disabled.
  4. Verify that the firmware, kernel, and OS (VMSAs) hashes, part of the
     measurement, are trusted.
  5. Verify the measurement is valid.
  6. Verify the report's certificate chain to hardware root of trust.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>

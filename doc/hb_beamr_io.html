<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module hb_beamr_io</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module hb_beamr_io</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Simple interface for memory management for Beamr instances.


<h2><a name="description">Description</a></h2><p>Simple interface for memory management for Beamr instances.   
It allows for reading and writing to memory, as well as allocating and   
freeing memory by calling the WASM module's exported malloc and free   
functions.</p>
  
   Unlike the majority of HyperBEAM modules, this module takes a defensive
   approach to type checking, breaking from the conventional Erlang style,
   such that failures are caught in the Erlang-side of functions rather than
   in the C/WASM-side.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#free-2">free/2</a></td><td>Free space allocated in the Beamr instance's native memory via a
  call to the exported free function from the WASM.</td></tr>
<tr><td valign="top"><a href="#malloc-2">malloc/2</a></td><td>Allocate space for (via an exported malloc function from the WASM) in
  the Beamr instance's native memory.</td></tr>
<tr><td valign="top"><a href="#read-3">read/3</a></td><td>Read a binary from the Beamr instance's native memory at a given offset
  and of a given size.</td></tr>
<tr><td valign="top"><a href="#read_string-2">read_string/2</a></td><td>Simple helper function to read a string from the Beamr instance's native
  memory at a given offset.</td></tr>
<tr><td valign="top"><a href="#size-1">size/1</a></td><td>Get the size (in bytes) of the native memory allocated in the Beamr
  instance.</td></tr>
<tr><td valign="top"><a href="#write-3">write/3</a></td><td>Write a binary to the Beamr instance's native memory at a given offset.</td></tr>
<tr><td valign="top"><a href="#write_string-2">write_string/2</a></td><td>Simple helper function to allocate space for (via malloc) and write a
  string to the Beamr instance's native memory.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="free-2">free/2</a></h3>
<div class="spec">
<p><code>free(WASM, Ptr) -&gt; any()</code></p>
<p> </p>
</div><p>Free space allocated in the Beamr instance's native memory via a
  call to the exported free function from the WASM.</p>

<h3 class="function"><a name="malloc-2">malloc/2</a></h3>
<div class="spec">
<p><code>malloc(WASM, Size) -&gt; any()</code></p>
<p> </p>
</div><p>Allocate space for (via an exported malloc function from the WASM) in
  the Beamr instance's native memory.</p>

<h3 class="function"><a name="read-3">read/3</a></h3>
<div class="spec">
<p><code>read(WASM, Offset, Size) -&gt; any()</code></p>
<p> </p>
</div><p>Read a binary from the Beamr instance's native memory at a given offset
  and of a given size.</p>

<h3 class="function"><a name="read_string-2">read_string/2</a></h3>
<div class="spec">
<p><code>read_string(Port, Offset) -&gt; any()</code></p>
<p> </p>
</div><p>Simple helper function to read a string from the Beamr instance's native
  memory at a given offset. Memory is read by default in chunks of 8 bytes,
  but this can be overridden by passing a different chunk size. Strings are
  assumed to be null-terminated.</p>

<h3 class="function"><a name="size-1">size/1</a></h3>
<div class="spec">
<p><code>size(WASM) -&gt; any()</code></p>
<p> </p>
</div><p>Get the size (in bytes) of the native memory allocated in the Beamr
  instance. Note that WASM memory can never be reduced once granted to an
  instance (although it can, of course, be reallocated _inside_ the
  environment).</p>

<h3 class="function"><a name="write-3">write/3</a></h3>
<div class="spec">
<p><code>write(WASM, Offset, Data) -&gt; any()</code></p>
<p> </p>
</div><p>Write a binary to the Beamr instance's native memory at a given offset.</p>

<h3 class="function"><a name="write_string-2">write_string/2</a></h3>
<div class="spec">
<p><code>write_string(WASM, Data) -&gt; any()</code></p>
<p> </p>
</div><p>Simple helper function to allocate space for (via malloc) and write a
  string to the Beamr instance's native memory. This can be helpful for easily
  pushing a string into the instance, such that the resulting pointer can be
  passed to exported functions from the instance.
  Assumes that the input is either an iolist or a binary, adding a null byte
  to the end of the string.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
